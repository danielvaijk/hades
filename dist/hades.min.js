!(function (e, t) {
    for (var n in t) e[n] = t[n];
})(
    this,
    (function (e) {
        var t = {};
        function n(r) {
            if (t[r]) return t[r].exports;
            var o = (t[r] = { i: r, l: !1, exports: {} });
            return e[r].call(o.exports, o, o.exports, n), (o.l = !0), o.exports;
        }
        return (
            (n.m = e),
            (n.c = t),
            (n.d = function (e, t, r) {
                n.o(e, t) ||
                    Object.defineProperty(e, t, { enumerable: !0, get: r });
            }),
            (n.r = function (e) {
                "undefined" != typeof Symbol &&
                    Symbol.toStringTag &&
                    Object.defineProperty(e, Symbol.toStringTag, {
                        value: "Module",
                    }),
                    Object.defineProperty(e, "__esModule", { value: !0 });
            }),
            (n.t = function (e, t) {
                if ((1 & t && (e = n(e)), 8 & t)) return e;
                if (4 & t && "object" == typeof e && e && e.__esModule)
                    return e;
                var r = Object.create(null);
                if (
                    (n.r(r),
                    Object.defineProperty(r, "default", {
                        enumerable: !0,
                        value: e,
                    }),
                    2 & t && "string" != typeof e)
                )
                    for (var o in e)
                        n.d(
                            r,
                            o,
                            function (t) {
                                return e[t];
                            }.bind(null, o)
                        );
                return r;
            }),
            (n.n = function (e) {
                var t =
                    e && e.__esModule
                        ? function () {
                              return e.default;
                          }
                        : function () {
                              return e;
                          };
                return n.d(t, "a", t), t;
            }),
            (n.o = function (e, t) {
                return Object.prototype.hasOwnProperty.call(e, t);
            }),
            (n.p = ""),
            n((n.s = 0))
        );
    })([
        function (e, t, n) {
            "use strict";
            function r(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            n.r(t),
                n.d(t, "Model", function () {
                    return s;
                }),
                n.d(t, "Schema", function () {
                    return j;
                }),
                n.d(t, "Database", function () {
                    return G;
                });
            var o = (function () {
                function e(t) {
                    !(function (e, t) {
                        if (!(e instanceof t))
                            throw new TypeError(
                                "Cannot call a class as a function"
                            );
                    })(this, e),
                        (this._type = t.type),
                        (this._ModelClass = t.ModelClass),
                        (this._fieldsOrNull = t.fields || null),
                        (this._modelIdOrNull = t.modelId || null),
                        (this._willApplyToEntireTable =
                            t.willApplyToEntireTable || !1);
                }
                var t, n, o;
                return (
                    (t = e),
                    (n = [
                        {
                            key: "getType",
                            value: function () {
                                return this._type;
                            },
                        },
                        {
                            key: "getModelClass",
                            value: function () {
                                return this._ModelClass;
                            },
                        },
                        {
                            key: "getModelIdOrNull",
                            value: function () {
                                return this._modelIdOrNull;
                            },
                        },
                        {
                            key: "getWillApplyToEntireTable",
                            value: function () {
                                return this._willApplyToEntireTable;
                            },
                        },
                        {
                            key: "getFieldsOrNull",
                            value: function () {
                                return this._fieldsOrNull;
                            },
                        },
                    ]) && r(t.prototype, n),
                    o && r(t, o),
                    e
                );
            })();
            function i(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            var u = (function () {
                function e(t, n) {
                    !(function (e, t) {
                        if (!(e instanceof t))
                            throw new TypeError(
                                "Cannot call a class as a function"
                            );
                    })(this, e),
                        (this._key = t),
                        (this._value = n);
                }
                var t, n, r;
                return (
                    (t = e),
                    (n = [
                        {
                            key: "getValue",
                            value: function () {
                                return this._value;
                            },
                        },
                        {
                            key: "equals",
                            value: function (e) {
                                return e.getValue() === this._value;
                            },
                        },
                    ]) && i(t.prototype, n),
                    r && i(t, r),
                    e
                );
            })();
            function a(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            var l = (function () {
                function e() {
                    !(function (e, t) {
                        if (!(e instanceof t))
                            throw new TypeError(
                                "Cannot call a class as a function"
                            );
                    })(this, e);
                }
                var t, n, r;
                return (
                    (t = e),
                    (r = [
                        {
                            key: "INSERT",
                            value: function () {
                                return new u("INSERT", "INSERT");
                            },
                        },
                        {
                            key: "UPDATE",
                            value: function () {
                                return new u("UPDATE", "UPDATE");
                            },
                        },
                        {
                            key: "UPSERT",
                            value: function () {
                                return new u("UPSERT", "UPSERT");
                            },
                        },
                        {
                            key: "DELETE",
                            value: function () {
                                return new u("DELETE", "DELETE");
                            },
                        },
                    ]),
                    (n = null) && a(t.prototype, n),
                    r && a(t, r),
                    e
                );
            })();
            function c(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            var s = (function () {
                function e(t, n) {
                    !(function (e, t) {
                        if (!(e instanceof t))
                            throw new TypeError(
                                "Cannot call a class as a function"
                            );
                    })(this, e),
                        (this.modelId = n),
                        (this.ModelClass = t),
                        (this.session = this.ModelClass.session),
                        (this.tableKey = this.ModelClass.tableKey),
                        (this.fields = this.ModelClass.fields().castValuesAgainstDefinition(
                            this._getInstanceRowFromStateOrEmpty()
                        ));
                }
                var t, n, r;
                return (
                    (t = e),
                    (r = [
                        {
                            key: "create",
                            value: function (e) {
                                this.session.applyMutation(
                                    new o({
                                        fields: e,
                                        ModelClass: this,
                                        type: l.INSERT(),
                                    })
                                );
                            },
                        },
                        {
                            key: "upsert",
                            value: function (e) {
                                this.session.applyMutation(
                                    new o({
                                        fields: e,
                                        ModelClass: this,
                                        type: l.UPSERT(),
                                    })
                                );
                            },
                        },
                        {
                            key: "deleteAll",
                            value: function () {
                                this.session.applyMutation(
                                    new o({
                                        ModelClass: this,
                                        willApplyToEntireTable: !0,
                                        type: l.DELETE(),
                                    })
                                );
                            },
                        },
                        {
                            key: "withId",
                            value: function (t) {
                                return new e(this, t);
                            },
                        },
                        {
                            key: "getTableKeyOrNull",
                            value: function () {
                                return this.tableKey || null;
                            },
                        },
                        {
                            key: "addTableKey",
                            value: function (e) {
                                this.tableKey = e;
                            },
                        },
                        {
                            key: "addSession",
                            value: function (e) {
                                this.session = e;
                            },
                        },
                    ]),
                    (n = [
                        {
                            key: "update",
                            value: function (e) {
                                this.session.applyMutation(
                                    new o({
                                        fields: e,
                                        modelId: this.fields.id,
                                        ModelClass: this.ModelClass,
                                        type: l.UPDATE(),
                                    })
                                );
                            },
                        },
                        {
                            key: "delete",
                            value: function () {
                                this.session.applyMutation(
                                    new o({
                                        modelId: this.fields.id,
                                        ModelClass: this.ModelClass,
                                        type: l.DELETE(),
                                    })
                                );
                            },
                        },
                        {
                            key: "_getInstanceRowFromStateOrEmpty",
                            value: function () {
                                return (
                                    this.session.state[this.tableKey].rows[
                                        this.modelId
                                    ] || {}
                                );
                            },
                        },
                    ]) && c(t.prototype, n),
                    r && c(t, r),
                    e
                );
            })();
            function f(e) {
                return (f =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                        ? function (e) {
                              return typeof e;
                          }
                        : function (e) {
                              return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                          })(e);
            }
            function y(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function");
            }
            function p(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            function d(e, t) {
                return !t || ("object" !== f(t) && "function" != typeof t)
                    ? (function (e) {
                          if (void 0 === e)
                              throw new ReferenceError(
                                  "this hasn't been initialised - super() hasn't been called"
                              );
                          return e;
                      })(e)
                    : t;
            }
            function b(e) {
                var t = "function" == typeof Map ? new Map() : void 0;
                return (b = function (e) {
                    if (
                        null === e ||
                        ((n = e),
                        -1 ===
                            Function.toString.call(n).indexOf("[native code]"))
                    )
                        return e;
                    var n;
                    if ("function" != typeof e)
                        throw new TypeError(
                            "Super expression must either be null or a function"
                        );
                    if (void 0 !== t) {
                        if (t.has(e)) return t.get(e);
                        t.set(e, r);
                    }
                    function r() {
                        return h(e, arguments, m(this).constructor);
                    }
                    return (
                        (r.prototype = Object.create(e.prototype, {
                            constructor: {
                                value: r,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0,
                            },
                        })),
                        w(r, e)
                    );
                })(e);
            }
            function h(e, t, n) {
                return (h = v()
                    ? Reflect.construct
                    : function (e, t, n) {
                          var r = [null];
                          r.push.apply(r, t);
                          var o = new (Function.bind.apply(e, r))();
                          return n && w(o, n.prototype), o;
                      }).apply(null, arguments);
            }
            function v() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham) return !1;
                if ("function" == typeof Proxy) return !0;
                try {
                    return (
                        Date.prototype.toString.call(
                            Reflect.construct(Date, [], function () {})
                        ),
                        !0
                    );
                } catch (e) {
                    return !1;
                }
            }
            function w(e, t) {
                return (w =
                    Object.setPrototypeOf ||
                    function (e, t) {
                        return (e.__proto__ = t), e;
                    })(e, t);
            }
            function m(e) {
                return (m = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (e) {
                          return e.__proto__ || Object.getPrototypeOf(e);
                      })(e);
            }
            var g = (function (e) {
                !(function (e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError(
                            "Super expression must either be null or a function"
                        );
                    (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                        },
                    })),
                        t && w(e, t);
                })(a, e);
                var t,
                    n,
                    r,
                    o,
                    i,
                    u =
                        ((t = a),
                        (n = v()),
                        function () {
                            var e,
                                r = m(t);
                            if (n) {
                                var o = m(this).constructor;
                                e = Reflect.construct(r, arguments, o);
                            } else e = r.apply(this, arguments);
                            return d(this, e);
                        });
                function a() {
                    return y(this, a), u.apply(this, arguments);
                }
                return (
                    (r = a),
                    (o = [
                        {
                            key: "name",
                            get: function () {
                                return "HadesValidationError";
                            },
                            set: function (e) {},
                        },
                    ]) && p(r.prototype, o),
                    i && p(r, i),
                    a
                );
            })(b(Error));
            function O(e) {
                return (O =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                        ? function (e) {
                              return typeof e;
                          }
                        : function (e) {
                              return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                          })(e);
            }
            function S(e, t) {
                var n = Object.keys(e);
                if (Object.getOwnPropertySymbols) {
                    var r = Object.getOwnPropertySymbols(e);
                    t &&
                        (r = r.filter(function (t) {
                            return Object.getOwnPropertyDescriptor(
                                e,
                                t
                            ).enumerable;
                        })),
                        n.push.apply(n, r);
                }
                return n;
            }
            function _(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = null != arguments[t] ? arguments[t] : {};
                    t % 2
                        ? S(Object(n), !0).forEach(function (t) {
                              E(e, t, n[t]);
                          })
                        : Object.getOwnPropertyDescriptors
                        ? Object.defineProperties(
                              e,
                              Object.getOwnPropertyDescriptors(n)
                          )
                        : S(Object(n)).forEach(function (t) {
                              Object.defineProperty(
                                  e,
                                  t,
                                  Object.getOwnPropertyDescriptor(n, t)
                              );
                          });
                }
                return e;
            }
            function E(e, t, n) {
                return (
                    t in e
                        ? Object.defineProperty(e, t, {
                              value: n,
                              enumerable: !0,
                              configurable: !0,
                              writable: !0,
                          })
                        : (e[t] = n),
                    e
                );
            }
            function M(e, t) {
                return (
                    (function (e) {
                        if (Array.isArray(e)) return e;
                    })(e) ||
                    (function (e, t) {
                        if (
                            "undefined" == typeof Symbol ||
                            !(Symbol.iterator in Object(e))
                        )
                            return;
                        var n = [],
                            r = !0,
                            o = !1,
                            i = void 0;
                        try {
                            for (
                                var u, a = e[Symbol.iterator]();
                                !(r = (u = a.next()).done) &&
                                (n.push(u.value), !t || n.length !== t);
                                r = !0
                            );
                        } catch (e) {
                            (o = !0), (i = e);
                        } finally {
                            try {
                                r || null == a.return || a.return();
                            } finally {
                                if (o) throw i;
                            }
                        }
                        return n;
                    })(e, t) ||
                    (function (e, t) {
                        if (!e) return;
                        if ("string" == typeof e) return T(e, t);
                        var n = Object.prototype.toString.call(e).slice(8, -1);
                        "Object" === n &&
                            e.constructor &&
                            (n = e.constructor.name);
                        if ("Map" === n || "Set" === n) return Array.from(e);
                        if (
                            "Arguments" === n ||
                            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
                        )
                            return T(e, t);
                    })(e, t) ||
                    (function () {
                        throw new TypeError(
                            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
                        );
                    })()
                );
            }
            function T(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
                return r;
            }
            function k(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            var j = (function () {
                function e(t) {
                    !(function (e, t) {
                        if (!(e instanceof t))
                            throw new TypeError(
                                "Cannot call a class as a function"
                            );
                    })(this, e),
                        (this.schemaDefinition = t);
                }
                var t, n, r;
                return (
                    (t = e),
                    (n = [
                        {
                            key: "castValuesAgainstDefinition",
                            value: function (e) {
                                if (!e.id)
                                    throw new g(
                                        "ID is a required field for Model schema definition."
                                    );
                                var t = E({}, "id", Number(e.id));
                                return Object.entries(
                                    this.schemaDefinition
                                ).reduce(function (t, n) {
                                    var r = M(n, 2),
                                        o = r[0],
                                        i = r[1];
                                    return _(
                                        _({}, t),
                                        {},
                                        E({}, o, new i(e[o]))
                                    );
                                }, t);
                            },
                        },
                        {
                            key: "assertSchemaAllowsFieldsForMutation",
                            value: function (e, t) {
                                var n = this,
                                    r = ["id"];
                                function o(e) {
                                    return (
                                        !1 === r.includes(e) &&
                                        "undefined" ===
                                            O(this.schemaDefinition[e])
                                    );
                                }
                                Object.keys(t).forEach(function (t) {
                                    if (o.call(n, t))
                                        throw new g(
                                            [
                                                "Cannot apply mutation to ".concat(
                                                    e.toString(),
                                                    " model,"
                                                ),
                                                "found superfluous property '".concat(
                                                    t,
                                                    "'."
                                                ),
                                            ].join(" ")
                                        );
                                });
                            },
                        },
                    ]) && k(t.prototype, n),
                    r && k(t, r),
                    e
                );
            })();
            function P(e, t) {
                var n = Object.keys(e);
                if (Object.getOwnPropertySymbols) {
                    var r = Object.getOwnPropertySymbols(e);
                    t &&
                        (r = r.filter(function (t) {
                            return Object.getOwnPropertyDescriptor(
                                e,
                                t
                            ).enumerable;
                        })),
                        n.push.apply(n, r);
                }
                return n;
            }
            function R(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = null != arguments[t] ? arguments[t] : {};
                    t % 2
                        ? P(Object(n), !0).forEach(function (t) {
                              I(e, t, n[t]);
                          })
                        : Object.getOwnPropertyDescriptors
                        ? Object.defineProperties(
                              e,
                              Object.getOwnPropertyDescriptors(n)
                          )
                        : P(Object(n)).forEach(function (t) {
                              Object.defineProperty(
                                  e,
                                  t,
                                  Object.getOwnPropertyDescriptor(n, t)
                              );
                          });
                }
                return e;
            }
            function I(e, t, n) {
                return (
                    t in e
                        ? Object.defineProperty(e, t, {
                              value: n,
                              enumerable: !0,
                              configurable: !0,
                              writable: !0,
                          })
                        : (e[t] = n),
                    e
                );
            }
            function D(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            var C = (function () {
                function e(t) {
                    !(function (e, t) {
                        if (!(e instanceof t))
                            throw new TypeError(
                                "Cannot call a class as a function"
                            );
                    })(this, e),
                        (this.rows = this._createStorageForRows()),
                        (this._meta = this._createStorageForMeta()),
                        (this._key = this._getModelTableName(t));
                }
                var t, n, r;
                return (
                    (t = e),
                    (n = [
                        {
                            key: "getKey",
                            value: function () {
                                return this._key;
                            },
                        },
                        {
                            key: "getRows",
                            value: function () {
                                return JSON.parse(JSON.stringify(this.rows));
                            },
                        },
                        {
                            key: "insertRow",
                            value: function (e) {
                                var t = function () {
                                    return e.id ? e.id : this._getNextId();
                                }.call(this);
                                if (this.rows[t])
                                    throw new g(
                                        "Cannot insert new row since given ID '".concat(
                                            t,
                                            "' is not unique."
                                        )
                                    );
                                (this.rows[t] = R(
                                    R({}, e),
                                    {},
                                    I({}, "id", t)
                                )),
                                    e.id
                                        ? (this._meta.idBlacklist.push(t),
                                          this._meta.idBlacklist.sort(function (
                                              e,
                                              t
                                          ) {
                                              return e - t;
                                          }))
                                        : (this._meta.lastIdIncremental = t);
                            },
                        },
                        {
                            key: "updateRow",
                            value: function (e, t) {
                                Object.assign(this.rows[e], t);
                            },
                        },
                        {
                            key: "upsertRow",
                            value: function (e) {
                                e.id && this.rows[e.id]
                                    ? this.updateRow(e.id, e)
                                    : this.insertRow(e);
                            },
                        },
                        {
                            key: "deleteRow",
                            value: function (e) {
                                var t = this._meta.idBlacklist,
                                    n = t.indexOf(e);
                                -1 === n || t.splice(n, 1),
                                    delete this.rows[e.toString()];
                            },
                        },
                        {
                            key: "truncate",
                            value: function () {
                                (this.rows = this._createStorageForRows()),
                                    (this._meta = this._createStorageForMeta());
                            },
                        },
                        {
                            key: "_createStorageForRows",
                            value: function () {
                                return {};
                            },
                        },
                        {
                            key: "_createStorageForMeta",
                            value: function () {
                                return {
                                    idBlacklist: [],
                                    lastIdIncremental: 0,
                                };
                            },
                        },
                        {
                            key: "_getNextId",
                            value: function () {
                                var e = this._meta,
                                    t = e.idBlacklist;
                                return (function e(n) {
                                    var r = t.indexOf(n);
                                    return -1 === r
                                        ? n
                                        : r === t.length - 1
                                        ? n + 1
                                        : e(n + 1);
                                })(e.lastIdIncremental + 1);
                            },
                        },
                        {
                            key: "_getModelTableName",
                            value: function (e) {
                                return ""
                                    .concat("table_")
                                    .concat(e.toString().toLowerCase());
                            },
                        },
                    ]) && D(t.prototype, n),
                    r && D(t, r),
                    e
                );
            })();
            function N(e) {
                return (N =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                        ? function (e) {
                              return typeof e;
                          }
                        : function (e) {
                              return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                          })(e);
            }
            function A(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function");
            }
            function F(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            function x(e, t) {
                return !t || ("object" !== N(t) && "function" != typeof t)
                    ? (function (e) {
                          if (void 0 === e)
                              throw new ReferenceError(
                                  "this hasn't been initialised - super() hasn't been called"
                              );
                          return e;
                      })(e)
                    : t;
            }
            function U(e) {
                var t = "function" == typeof Map ? new Map() : void 0;
                return (U = function (e) {
                    if (
                        null === e ||
                        ((n = e),
                        -1 ===
                            Function.toString.call(n).indexOf("[native code]"))
                    )
                        return e;
                    var n;
                    if ("function" != typeof e)
                        throw new TypeError(
                            "Super expression must either be null or a function"
                        );
                    if (void 0 !== t) {
                        if (t.has(e)) return t.get(e);
                        t.set(e, r);
                    }
                    function r() {
                        return K(e, arguments, V(this).constructor);
                    }
                    return (
                        (r.prototype = Object.create(e.prototype, {
                            constructor: {
                                value: r,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0,
                            },
                        })),
                        L(r, e)
                    );
                })(e);
            }
            function K(e, t, n) {
                return (K = q()
                    ? Reflect.construct
                    : function (e, t, n) {
                          var r = [null];
                          r.push.apply(r, t);
                          var o = new (Function.bind.apply(e, r))();
                          return n && L(o, n.prototype), o;
                      }).apply(null, arguments);
            }
            function q() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham) return !1;
                if ("function" == typeof Proxy) return !0;
                try {
                    return (
                        Date.prototype.toString.call(
                            Reflect.construct(Date, [], function () {})
                        ),
                        !0
                    );
                } catch (e) {
                    return !1;
                }
            }
            function L(e, t) {
                return (L =
                    Object.setPrototypeOf ||
                    function (e, t) {
                        return (e.__proto__ = t), e;
                    })(e, t);
            }
            function V(e) {
                return (V = Object.setPrototypeOf
                    ? Object.getPrototypeOf
                    : function (e) {
                          return e.__proto__ || Object.getPrototypeOf(e);
                      })(e);
            }
            var B = (function (e) {
                !(function (e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError(
                            "Super expression must either be null or a function"
                        );
                    (e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            writable: !0,
                            configurable: !0,
                        },
                    })),
                        t && L(e, t);
                })(a, e);
                var t,
                    n,
                    r,
                    o,
                    i,
                    u =
                        ((t = a),
                        (n = q()),
                        function () {
                            var e,
                                r = V(t);
                            if (n) {
                                var o = V(this).constructor;
                                e = Reflect.construct(r, arguments, o);
                            } else e = r.apply(this, arguments);
                            return x(this, e);
                        });
                function a() {
                    return A(this, a), u.apply(this, arguments);
                }
                return (
                    (r = a),
                    (o = [
                        {
                            key: "name",
                            get: function () {
                                return "HadesUnexpectedValueError";
                            },
                            set: function (e) {},
                        },
                    ]) && F(r.prototype, o),
                    i && F(r, i),
                    a
                );
            })(U(Error));
            function W(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            var H = (function () {
                function e(t) {
                    !(function (e, t) {
                        if (!(e instanceof t))
                            throw new TypeError(
                                "Cannot call a class as a function"
                            );
                    })(this, e),
                        (this.state = t);
                }
                var t, n, r;
                return (
                    (t = e),
                    (n = [
                        {
                            key: "addModels",
                            value: function (e) {
                                this.models = e;
                            },
                        },
                        {
                            key: "mergeIntoState",
                            value: function (e) {
                                Object.assign(this.state, e);
                            },
                        },
                        {
                            key: "applyMutation",
                            value: function (e) {
                                var t = e.getType(),
                                    n = e.getModelClass(),
                                    r = this._getPointerForModelTableOrNull(n);
                                if (!r)
                                    throw new B(
                                        "Cannot apply mutation to Model without table pointer."
                                    );
                                var o = e.getModelIdOrNull(),
                                    i = e.getFieldsOrNull(),
                                    u = e.getWillApplyToEntireTable();
                                if (
                                    (i &&
                                        n
                                            .fields()
                                            .assertSchemaAllowsFieldsForMutation(
                                                n,
                                                i
                                            ),
                                    t.equals(l.INSERT()))
                                )
                                    this._applyInsertMutation(r, i);
                                else if (t.equals(l.UPSERT()))
                                    this._applyUpsertMutation(r, i);
                                else if (t.equals(l.DELETE()))
                                    this._applyDeleteMutation(r, o, u);
                                else {
                                    if (!t.equals(l.UPDATE()))
                                        throw new B(
                                            "Unexpected mutation type '".concat(
                                                t.getValue(),
                                                "'."
                                            )
                                        );
                                    this._applyUpdateMutation(r, i, o);
                                }
                            },
                        },
                        {
                            key: "_getPointerForModelTableOrNull",
                            value: function (e) {
                                var t = e.getTableKeyOrNull();
                                return t ? this.state[t] : null;
                            },
                        },
                        {
                            key: "_applyDeleteMutation",
                            value: function (e, t, n) {
                                if (n) e.truncate();
                                else {
                                    if (!t)
                                        throw new B(
                                            "Model ID cannot be null for DELETE MutationType."
                                        );
                                    e.deleteRow(t);
                                }
                            },
                        },
                        {
                            key: "_applyInsertMutation",
                            value: function (e, t) {
                                if (!t)
                                    throw new B(
                                        "Fields are required for INSERT MutationType."
                                    );
                                e.insertRow(t);
                            },
                        },
                        {
                            key: "_applyUpsertMutation",
                            value: function (e, t) {
                                if (!t)
                                    throw new B(
                                        "Fields are required for UPSERT MutationType."
                                    );
                                e.upsertRow(t);
                            },
                        },
                        {
                            key: "_applyUpdateMutation",
                            value: function (e, t, n) {
                                if (null === t)
                                    throw new B(
                                        "Fields are required for UPDATE MutationType."
                                    );
                                if (null === n)
                                    throw new B(
                                        "Model ID cannot be null for UPDATE MutationType."
                                    );
                                e.updateRow(n, t);
                            },
                        },
                    ]) && W(t.prototype, n),
                    r && W(t, r),
                    e
                );
            })();
            function J(e) {
                return (J =
                    "function" == typeof Symbol &&
                    "symbol" == typeof Symbol.iterator
                        ? function (e) {
                              return typeof e;
                          }
                        : function (e) {
                              return e &&
                                  "function" == typeof Symbol &&
                                  e.constructor === Symbol &&
                                  e !== Symbol.prototype
                                  ? "symbol"
                                  : typeof e;
                          })(e);
            }
            function $(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function");
            }
            function z(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    (r.enumerable = r.enumerable || !1),
                        (r.configurable = !0),
                        "value" in r && (r.writable = !0),
                        Object.defineProperty(e, r.key, r);
                }
            }
            var G = (function () {
                function e() {
                    $(this, e);
                    for (
                        var t = arguments.length, n = new Array(t), r = 0;
                        r < t;
                        r++
                    )
                        n[r] = arguments[r];
                    this._registerModels(n);
                }
                var t, n, r;
                return (
                    (t = e),
                    (n = [
                        {
                            key: "reducer",
                            value: function () {
                                var e = this;
                                return function () {
                                    var t =
                                            arguments.length > 0 &&
                                            void 0 !== arguments[0]
                                                ? arguments[0]
                                                : {},
                                        n =
                                            arguments.length > 1
                                                ? arguments[1]
                                                : void 0,
                                        r = e._createSession(t);
                                    return (
                                        e._forModelsInSessionCreateTablesIfNeeded(
                                            r
                                        ),
                                        e._forModelsInSessionApplyReducers(
                                            r,
                                            n
                                        ),
                                        r.state
                                    );
                                };
                            },
                        },
                        {
                            key: "_registerModels",
                            value: function (e) {
                                this.registeredModels = e.reduce(
                                    function (e, t) {
                                        return (
                                            e.includes(t)
                                                ? this._createWarningDuplicateModel(
                                                      t.toString()
                                                  )
                                                : e.push(t),
                                            e
                                        );
                                    }.bind(this),
                                    []
                                );
                            },
                        },
                        {
                            key: "_createSession",
                            value: function (e) {
                                var t = new H(e);
                                return (
                                    t.addModels(this.registeredModels),
                                    this.registeredModels.forEach(function (e) {
                                        e.addSession(t);
                                    }),
                                    t
                                );
                            },
                        },
                        {
                            key: "_forModelsInSessionCreateTablesIfNeeded",
                            value: function (e) {
                                e.models.forEach(function (t) {
                                    var n,
                                        r,
                                        o,
                                        i = t.getTableKeyOrNull();
                                    if (i && e.state[i]);
                                    else {
                                        var u = new C(t),
                                            a = u.getKey();
                                        t.addTableKey(a),
                                            e.mergeIntoState(
                                                ((o = u),
                                                (r = a) in (n = {})
                                                    ? Object.defineProperty(
                                                          n,
                                                          r,
                                                          {
                                                              value: o,
                                                              enumerable: !0,
                                                              configurable: !0,
                                                              writable: !0,
                                                          }
                                                      )
                                                    : (n[r] = o),
                                                n)
                                            );
                                    }
                                });
                            },
                        },
                        {
                            key: "_forModelsInSessionApplyReducers",
                            value: function (e, t) {
                                e.models.forEach(function (e) {
                                    "function" === J(e.reducer) && e.reducer(t);
                                });
                            },
                        },
                        {
                            key: "_createWarningDuplicateModel",
                            value: function (e) {
                                console.warn(
                                    "Tried to register duplicate Model: '".concat(
                                        e,
                                        "'."
                                    )
                                );
                            },
                        },
                    ]) && z(t.prototype, n),
                    r && z(t, r),
                    e
                );
            })();
        },
    ])
);
//# sourceMappingURL=hades.min.js.map
